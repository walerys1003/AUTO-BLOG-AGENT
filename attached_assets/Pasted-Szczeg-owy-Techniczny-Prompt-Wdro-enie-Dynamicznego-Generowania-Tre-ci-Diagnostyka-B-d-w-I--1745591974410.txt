SzczegÃ³Å‚owy Techniczny Prompt: WdroÅ¼enie Dynamicznego Generowania TreÅ›ci + Diagnostyka BÅ‚Ä™dÃ³w
ğŸ” I. Diagnostyka i Naprawa BÅ‚Ä™dÃ³w w Generowaniu TreÅ›ci (Internal Server Error)
1. Opis problemu:
Internal Server Error (500) pojawia siÄ™ po klikniÄ™ciu Generate Article w module Select a Topic for Content Creation.

Brak dynamicznego wyÅ›wietlania treÅ›ci w Content Editor â€“ artykuÅ‚ siÄ™ nie generuje.


ğŸ”§ II. Obszary do Weryfikacji i MoÅ¼liwe Przyczyny:
1. Backend/API â€“ obsÅ‚uga Å¼Ä…daÅ„ generowania treÅ›ci:
SprawdÅº logi serwera (Node.js/Express lub inne) pod kÄ…tem bÅ‚Ä™dÃ³w 500 â€“ moÅ¼liwe przyczyny:

NieprawidÅ‚owe dane wejÅ›ciowe (np. brakujÄ…ce parametry: topic, paragraphs, style).

Timeout API â€“ zbyt dÅ‚ugie przetwarzanie zapytania do AI.

BÅ‚Ä…d w module komunikacji z AI (np. OpenRouter/GPT).

NiewÅ‚aÅ›ciwa obsÅ‚uga zwracanych danych (np. JSON.parse bÅ‚Ä™dnego formatu).

2. Frontend â€“ bÅ‚Ä™dy przekazywania danych:
BÅ‚Ä…d w przesyÅ‚aniu danych do API â€“ niepoprawne parametry w funkcji fetch() lub axios.

SprawdÅº, czy poprawnie przekazywane sÄ…: topic, numberOfParagraphs, writingStyle.

Brak walidacji â€“ uÅ¼ytkownik moÅ¼e kliknÄ…Ä‡ â€Generateâ€ bez wyboru tematu/stylu.

3. Baza danych / Tematy:
Pole Topics = N/A:

SprawdÅº, czy zapytanie do bazy (np. MongoDB, PostgreSQL) zwraca poprawne dane.

SprawdÅº, czy dane sÄ… poprawnie mapowane do komponentu frontend.

Brak danych w bazie â€“ upewnij siÄ™, Å¼e kolekcja/tabela z tematami nie jest pusta.

âš™ï¸ III. SzczegÃ³Å‚owy Plan WdroÅ¼enia Dynamicznego Generowania TreÅ›ci:
1. UI/UX â€“ Dynamiczne Przekierowanie i Renderowanie:
Po klikniÄ™ciu â€Generate Articleâ€:

Trigger w JS (lub React useEffect) â†’ natychmiastowe przekierowanie do Content Editor:

javascript
Kopiuj
Edytuj
document.querySelector("#generateButton").addEventListener("click", () => {
  window.location.href = "/content-creator/editor";
});
2. Dynamiczne Generowanie w Czasie Rzeczywistym:
PÄ™tla generujÄ…ca akapity:

javascript
Kopiuj
Edytuj
async function generateArticle(topic, style, paragraphs) {
  const editor = document.querySelector("#editor");
  for (let i = 1; i <= paragraphs; i++) {
    displayLoading(i, paragraphs);
    try {
      const response = await fetch("/api/generateParagraph", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ topic, style, paragraphIndex: i })
      });
      const data = await response.json();
      if (response.ok) {
        appendParagraph(editor, data.paragraph);
      } else {
        throw new Error(data.message || "Error generating content");
      }
    } catch (error) {
      showError(error.message);
      break;
    }
  }
  showSuccess();
}
3. Backend/API â€“ ObsÅ‚uga AkapitÃ³w:
Endpoint RESTful:

javascript
Kopiuj
Edytuj
app.post("/api/generateParagraph", async (req, res) => {
  const { topic, style, paragraphIndex } = req.body;
  if (!topic || !style || paragraphIndex === undefined) {
    return res.status(400).json({ message: "Missing parameters" });
  }

  try {
    const prompt = `Write paragraph ${paragraphIndex} about ${topic} in ${style} style.`;
    const aiResponse = await openRouter.generate({ prompt });
    const paragraph = aiResponse.data.content;
    res.status(200).json({ paragraph });
  } catch (err) {
    console.error("AI Generation Error:", err);
    res.status(500).json({ message: "Internal Server Error" });
  }
});
ğŸ–¥ï¸ IV. Regeneration Settings â€“ Diagnostyka:
1. BÅ‚Ä…d N/A â€“ Analiza:
SprawdÅº logikÄ™ wczytywania tematÃ³w:

javascript
Kopiuj
Edytuj
async function loadTopics() {
  try {
    const response = await fetch("/api/topics");
    const topics = await response.json();
    if (topics.length === 0) {
      displayNoTopics();
    } else {
      populateTopicsDropdown(topics);
    }
  } catch (error) {
    console.error("Error loading topics:", error);
  }
}
2. Backend â€“ Pobieranie tematÃ³w:
javascript
Kopiuj
Edytuj
app.get("/api/topics", async (req, res) => {
  try {
    const topics = await db.collection("topics").find({}).toArray();
    res.status(200).json(topics);
  } catch (err) {
    console.error("Database Error:", err);
    res.status(500).json({ message: "Failed to load topics" });
  }
});
ğŸ¯ V. Poprawa UX i ObsÅ‚uga BÅ‚Ä™dÃ³w:
1. Wizualny Feedback:
Åadowanie:

html
Kopiuj
Edytuj
<div id="loading-indicator">Generating paragraph <span id="current-paragraph">1</span> of <span id="total-paragraphs">3</span>...</div>
Po zakoÅ„czeniu:

javascript
Kopiuj
Edytuj
function showSuccess() {
  document.querySelector("#loading-indicator").innerText = "Article generated successfully!";
}
2. ObsÅ‚uga bÅ‚Ä™dÃ³w:
javascript
Kopiuj
Edytuj
function showError(message) {
  alert("Error: " + message);
  document.querySelector("#loading-indicator").innerText = "Generation failed. Please try again.";
}
âœ… VI. Podsumowanie â€“ Plan Naprawczy:
SprawdÅº i napraw bÅ‚Ä™dy API (500):

Logi serwera â†’ bÅ‚Ä™dy AI / brak parametrÃ³w.

Popraw integracjÄ™ Topics:

Sprawdzenie poÅ‚Ä…czenia DB i dynamicznego renderowania.

Zaimplementuj dynamiczne generowanie treÅ›ci:

UI + asynchroniczne API + kontrola postÄ™pu.

UX Feedback:

Dynamiczny loading, bÅ‚Ä™dy, sukces.

Testowanie stabilnoÅ›ci:

SprawdÅº rÃ³Å¼ne kombinacje tematÃ³w i stylÃ³w pisania.